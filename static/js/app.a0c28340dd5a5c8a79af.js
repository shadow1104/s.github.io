webpackJsonp([1],{"C/ZS":function(t,e,n){t.exports=n.p+"static/img/WechatIMG1.8dbe970.jpeg"},DYQN:function(t,e){},Julv:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("EqYI"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("C7Lr")({name:"App"},o,!1,function(t){n("Julv")},null,null).exports,i=n("NxjZ"),s=n.n(i),l=(n("zlkP"),n("7LQH")),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("el-row",[n("el-button",[t._v("默认按钮")]),t._v(" "),n("el-button",{attrs:{type:"primary"}},[t._v("主要按钮")]),t._v(" "),n("el-button",{attrs:{type:"success"}},[t._v("成功按钮")]),t._v(" "),n("el-button",{attrs:{type:"info"}},[t._v("信息按钮")]),t._v(" "),n("el-button",{attrs:{type:"warning"}},[t._v("警告按钮")]),t._v(" "),n("el-button",{attrs:{type:"danger"}},[t._v("危险按钮")])],1)],1)},staticRenderFns:[]};var u=n("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},c,!1,function(t){n("ta2E")},"data-v-c984bae4",null).exports,d=n("3cXf"),f=n.n(d),p=new r.default,m={props:["clickbtn"],computed:{cwArr:function(){return this.$store.state.cwArr}},watch:{cwArr:function(t,e){0===t.length||""==this.input?this.disabled=!0:this.disabled=!1}},data:function(){return{activeIndex:"1",activeIndex2:"1",color3:"rgba(19, 206, 102, 0.8)",predefineColors:["#f12b30","#1ba9e0","#a974f7","#2def4f","#fcfd39"],delbtn:!0,disabled:!0,del_data:{},input:""}},mounted:function(){var t=this;p.$on("update",function(){t.disabled=!0}),p.$on("del",function(e){-1!=e.index?(t.del_data=e,t.delbtn=!1):t.delbtn=!0}),p.$on("input_focus",function(){t.input_focus()}),this.$store.state.json_key=this.input},methods:{set_json_key:function(t){this.$store.state.json_key=t},init:function(){if(""!==this.input){var t=localStorage.getItem(this.input);null!==t&&p.$emit("initCwArr",t)}},input_focus:function(){this.$refs.mark.$el.querySelector("input").focus()},test:function(){p.$emit("test")},del:function(t){p.$emit("repeal",t)},changeColor:function(t){this.$store.commit("getcolor",t)},save:function(){this.$store.state.cwArr,this.$message({duration:2e3,message:"请牢记标识值："+this.input+"，恢复数据请输入标识值然后点恢复按钮"}),localStorage.setItem(this.input,f()(this.$store.state.cwArr))}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hei"},[n("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},on:{change:t.changeColor},model:{value:t.color3,callback:function(e){t.color3=e},expression:"color3"}}),t._v(" "),n("el-button",{staticClass:"backbtn",attrs:{type:"primary",disabled:t.disabled},on:{click:t.save}},[t._v("保存")]),t._v(" "),n("el-button",{staticClass:"backbtn",attrs:{type:"danger",disabled:t.delbtn},on:{click:function(e){return t.del(t.del_data)}}},[t._v("删除")]),t._v(" "),n("el-button",{staticClass:"backbtn",attrs:{type:"warning"},on:{click:function(e){return t.init()}}},[t._v("恢复数据")]),t._v(" "),n("el-input",{ref:"mark",staticClass:"flag backbtn",attrs:{placeholder:"请输入标识值"},on:{change:t.set_json_key},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)},staticRenderFns:[]};var g={watch:{filterText:function(t){this.$refs.tree2.filter(t)}},methods:{cl_tree_cbk:function(t,e,n){p.$emit("update",t.url)},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)}},data:function(){return{filterText:"",data2:[{id:1,label:"中正天街",children:[{id:1.3,label:"地下停车场",url:n("C/ZS")}]}],defaultProps:{children:"children",label:"label"}}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:t.data2,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode},on:{"node-click":t.cl_tree_cbk}})],1)},staticRenderFns:[]};var y={name:"home",components:{HelloWorld:u,Menu:n("C7Lr")(m,h,!1,function(t){n("ot50")},"data-v-43420607",null).exports,Navmenu:n("C7Lr")(g,v,!1,function(t){n("DYQN")},"data-v-541a1574",null).exports},computed:{gettile:function(){return new Date}},methods:{},data:function(){return{msg:"Welcome to Your Vue.js App",color:"#ff0000"}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("el-container",[e("el-header",[e("Menu")],1),this._v(" "),e("el-container",[e("div",{staticClass:"left"},[e("Navmenu")],1),this._v(" "),e("el-container",[e("el-main",[e("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=n("C7Lr")(y,w,!1,function(t){n("eXVM")},"data-v-f189576a",null).exports,_=(n("yyce"),function(t,e,n){var r=document.getElementById("img"),o=r.getContext("2d"),a=new Image;a.src=e,a.onload=function(){r.width=a.width,r.height=a.height,t.cw.height=a.height,t.cw.width=a.width,o.drawImage(a,0,0),n()}}),x=function(){return{x:document.getElementById("div").offsetLeft,y:document.getElementById("div").offsetTop}},$=[],C=function(t){var e=document.getElementById("img").getContext("2d");t.forEach(function(t){e.beginPath(),e.strokeStyle=t.color,e.arc(t.x,t.y,6,0,2*Math.PI),e.fillStyle=t.color,e.fill(),e.stroke()})},k=function(t){return""===t.style.left?t.style.left=0:t.style.left,""===t.style.top?t.style.top=0:t.style.top,{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px",""))}},A={name:"operatingfloor",components:{},data:function(){return{url:"",hei:"",params:{zoomVal:1,left:0,top:0,currentX:0,currentY:0,flag:!1},cw:{width:0,height:0},imgrecord:{x:0,y:0},parent:{x:0,y:0}}},created:function(){},destroyed:function(){p.$off()},mounted:function(){this.parent.x=x().x,this.parent.y=x().y,this.startDrag(this,document.getElementById("img"),document.getElementById("img"));var t=this;p.$on("update",function(e){t.url=e,t.$store.commit("init"),_(t,e,function(){C(t.$store.state.cwArr)})}),p.$on("repeal",function(e){t.repeal(e)}),p.$on("test",function(){t.test()}),p.$on("initCwArr",function(e){t.initCwArr(e)})},methods:{test:function(){},initCwArr:function(t){var e=this;_(this,this.url,function(){e.$store.state.cwArr=JSON.parse(t),_(e,e.url,function(){C(e.$store.state.cwArr)})})},repeal:function(t){var e=this;this.$store.state.cwArr,document.getElementById("img").getContext("2d");this.$store.commit("delkz",t),_(this,this.url,function(){C(e.$store.state.cwArr)})},recordCoord:function(t){p.$emit("del",this.pd(t))},pd:function(t){var e=this.$store.state.cwArr,n=document.getElementById("img"),r=t.clientX-this.parent.x-k(n).x,o=t.clientY-this.parent.y-k(n).y,a=void 0,i=-1,s=void 0;if(0!=e.length)for(var l=0;l<e.length;l++)if(Math.abs(r-e[l].x)<=4&&Math.abs(o-e[l].y)<=4){a=!0,i=l,s=e[l];break}return{flag:a,index:i,data:s}},dm:function(t){if(""==this.$store.state.json_key)return this.$message({message:"请在输入框输入标识值（用于二次描绘时获取数据)",type:"warning",duration:1500}),p.$emit("input_focus"),!1;var e=document.getElementById("img");this.$store.state.cwArr,t.clientX,this.parent.x,k(e).x,t.clientY,this.parent.y,k(e).y;!function(t,e,n){var r=document.getElementById("img").getContext("2d");if(r.beginPath(),r.strokeStyle=n.$store.state.color,0!==n.$store.state.cwArr.length){var o=n.$store.state.cwArr[n.$store.state.cwArr.length-1].y;Math.abs(o-e)<=4&&(e=o)}$.push({x:t,y:e,color:r.strokeStyle}),r.arc(t,$[$.length-1].y,6,0,2*Math.PI),r.fillStyle=n.$store.state.color,r.fill(),r.stroke(),n.$store.commit("pushArr",{x:t,y:e,color:r.strokeStyle})}(t.clientX-this.parent.x-k(e).x,t.clientY-this.parent.y-k(e).y,this)},getCss:function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,!1)[e]},startDrag:function(t,e,n,r){"auto"!==t.getCss(n,"left")&&(t.params.left=t.getCss(n,"left")),"auto"!==t.getCss(n,"top")&&(t.params.top=t.getCss(n,"top")),e.onmousedown=function(n){t.params.flag=!0,n||(n=window.event,e.onselectstart=function(){return!1});var r=n;t.params.currentX=r.clientX,t.params.currentY=r.clientY},document.onmouseup=function(){t.params.flag=!1,"auto"!==t.getCss(n,"left")&&(t.params.left=t.getCss(n,"left")),"auto"!==t.getCss(n,"top")&&(t.params.top=t.getCss(n,"top"))},document.onmousemove=function(e){var o=e||window.event;if(t.params.flag){var a=o.clientX,i=o.clientY,s=a-t.params.currentX,l=i-t.params.currentY;return n.style.left=parseInt(t.params.left)+s+"px",n.style.top=parseInt(t.params.top)+l+"px","function"==typeof r&&r((parseInt(t.params.left)||0)+s,(parseInt(t.params.top)||0)+l),e.preventDefault&&e.preventDefault(),!1}}}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"operatingfloor"},[n("div",{attrs:{id:"div"}},[n("canvas",{attrs:{id:"img"},on:{dblclick:function(e){return t.dm(e)},click:function(e){return t.recordCoord(e)}}})])])},staticRenderFns:[]};var E=n("C7Lr")(A,I,!1,function(t){n("QG79")},null,null).exports;r.default.use(l.a);var S=new l.a({mode:"history",routes:[{path:"/",name:"index",redirect:"/operatingFloor",component:b,children:[{path:"/operatingFloor",name:"operatingFloor",component:E}]}]}),Y=n("2bvH");r.default.use(Y.a);var j=new Y.a.Store({state:{color:"",cwArr:[],json_key:""},mutations:{getcolor:function(t,e){t.color=e},changecwArr:function(t,e){t.cwArr=e},pushArr:function(t,e){t.cwArr.push(e)},delkz:function(t,e){var n=t.cwArr.filter(function(t){return t.x!==e.data.x||t.y!==e.data.y||t.color!==e.data.color});t.cwArr=n},init:function(t){t.color="",t.cwArr.length=0}}});r.default.config.productionTip=!1,r.default.use(s.a,{size:"small",zIndex:3e3}),new r.default({el:"#app",router:S,store:j,render:function(t){return t(a)}})},QG79:function(t,e){},eXVM:function(t,e){},ot50:function(t,e){},ta2E:function(t,e){},yyce:function(t,e,n){t.exports=n.p+"static/img/fu.085d03e.png"},zlkP:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a0c28340dd5a5c8a79af.js.map